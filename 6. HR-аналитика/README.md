## Сборный проект — 2
`pandas, numpy, matplotlib, sklearn, phik`
### Описание проекта
HR-аналитики компании «Работа с заботой» помогают бизнесу оптимизировать управление персоналом: бизнес предоставляет данные, а аналитики предлагают, как избежать финансовых потерь и оттока сотрудников.
Компания предоставила данные с характеристиками сотрудников компании. Среди них — уровень удовлетворённости сотрудника работой в компании. Эту информацию получили из форм обратной связи: сотрудники заполняют тест-опросник, и по его результатам рассчитывается доля их удовлетворённости от 0 до 1, где 0 — совершенно неудовлетворён, 1 — полностью удовлетворён

**Задачи проекта:**
1. Построить модель, которая сможет предсказать уровень удовлетворённости сотрудника на основе данных заказчика
2. Построить модель, которая сможет на основе данных заказчика предсказать то, что сотрудник уволится из компании

### Общий вывод
Были подобраны две модели, которые прошли критерии успеха на тестовой выборке.  
Проект был разделен на две части - по задачам. В каждой задаче были выделены основные этапы.

**Предсказание уровня удовлетворённости сотрудника**
* на этапе предобработки данных были обнаружены и обработаны пропуски и некорректные значения в строках, так же устранены орфографические ошибки.
* на этапе исследовательского анализа построены гистограммы распределения и диаграммы размаха для количественных признаков, круговые диаграммы для категориальных признаков. Построена матрица корреляций признаков. Отмечены несколько важных пунктов:
    1. На диаграмме размаха зарплаты видны выбросы, их немного, поэтому убирать их не будем.
    2. Распределение целевого признака похоже на нормальное, но с двумя пиковыми значениями.
    3. Есть дисбаланс классов у признаков last_year_promo и last_year_violations.
    4. Целевой признак имеет среднюю и высокую корреляции с признаками last_year_violations (0.56) и supervisor_evaluation (0.76), утечки целевого признака не обнаружено.
* на этапе подготовки признаков был создан пайплайн с предобработкой, где применили кодирование и масштабирование, а также создали метрику SMAPE для оценки качества моделей.
* на этапе обучения моделей перебрали гиперпараметры 2-х моделей LinearRegression и DecisionTreeRegressor при помощи RandomizedSearchCV. По итогу определили лучшую модель и ее гиперпараметры: DecisionTreeRegressor(max_depth=13, min_samples_leaf=5, min_samples_split=18), значения метрики SMAPE на тестовой выборке составляет 13.8, что весьма неплохо.

**Предсказание увольнения сотрудника**
* на этапе предобработки данных была устранена орфографическая ошибка, пропусков, дубликатов не обнаружено
* на этапе исследовательского анализа построены гистограммы распределения и диаграммы размаха тренировочной выборки для количественных признаков, круговые диаграммы для категориальных признаков. Построена матрица корреляций признаков. Составлен портер уволившегося сотрудника и подтверждено утверждение, что уровень удовлетворённости сотрудника работой в компании влияет на его возможное увольнение. Отмечены несколько важных пунктов:
    1. На диаграмме размаха зарплаты видны выбросы, их немного, поэтому убирать их не будем.
    2. Есть дисбаланс целевого признака.
    3. Есть дисбаланс классов у признаков last_year_promo и last_year_violations.
    4. Целевой признак имеет среднюю корреляцию с признаками employment_years (0.66) и salary (0.56), утечки целевого признака не обнаружено.
    5. Сотрудники с низкой загрузкой увольняются чаще других.
    6. Сотрудники увольняются независимо от отдела, в котором работают.
    7. Уволившийся сотрудник в среднем зарабатывал 22800 (на 34.5% меньше остальных сотрудников).
    8. Уволившийся сотрудник в среднем проработал 1.5-2 года.
    9. Уровень удовлетворенности уволившихся сотрудников в среднем был в 1.5 раза ниже, чем у оставшихся.
* для улучшения качества второй модели добавили к входным данным тренировочной и тестовой выборкам новый признак job_satisfaction_rate, предсказанный лучшей моделью в задаче 1.
* на этапе подготовки добавили новый признак job_satisfaction_rate в num_columns для пайплайна data_preprocessor
* на этапе обучения моделей перебрали гиперпараметры 3-х моделей LogisticRegression, DecisionTreeClassifier и KNeighborsClassifier при помощи RandomizedSearchCV. По итогу определили лучшую модель и ее гиперпараметры: ecisionTreeClassifier(max_depth=10, min_samples_leaf=17, min_samples_split=12, max_features=3), значения метрики ROC-AUC на тестовой выборке составляет 0.914, что весьма неплохо.

**Предложения бизнесу**
* В основном увольняются сотрудники с низкой нагрузкой, следует грамотно подбирать задачи для сотрудников, что они не били баклуши.
* Важным фактором является зарплата, стоит рассмотреть возможность ее увеличения для сотрудников с зарплатой ниже средней по компании.
* Стоит обратить внимание на удовлетворенность сотрудника. Это тоже важный фактор оказвающий влияние на сколонность к увольнию. Следует добавить в тест-опросник вопросы о факторах раздражающих сотрудника в компании, а затем попыться как-то их устранить/сгладить.
* Пожалуй самым важным признаком является годы работы. Чем больше сотрудник трудится на благо Большого Брата, тем меньше шансы, что он уйдет. Таким образом, следует налаживать корпоративную жизнь комании. Устраивать корпоративы, спортивные активности, социальные гарантии и пр.
